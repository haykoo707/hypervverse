<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #ffffff;
        }
        #gameContainer {
            width: 90vw;
            height: 70vh;
            max-width: 400px;
            max-height: 500px;
            border: 3px solid black;
            margin: auto;
            position: relative;
            overflow: hidden;
            background-color: white;
        }
        #player {
            width: 45px;
            height: 90px;
            background: #00d0ff;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 10%;
            transition: left 0.1s ease-in-out;
        }
        .fallingObject {
            width: 30px;
            height: 30px;
            background: red;
            position: absolute;
            top: 0;
            border-radius: 50%;
            animation: fall linear;
        }
        @keyframes fall {
            from { transform: translateY(0); }
            to { transform: translateY(100vh); }
        }
        #gameOverPopup {
            position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 150px;
  background: rgba(0, 0, 0, 0.85);
  color: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 15px #00d0ff;
  text-align: center;
  display: none; /* Initially hidden */
        }
        canvas {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
}
@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-5px); }
  100% { transform: translateX(0); }
}
.glow {
  animation: shake 2.8s ease infinite;
  
  text-align: center;
  font-size: 1.7em;
  text-shadow: 0 0 10px #393939, 0 0 25px #858585;

}
.restart{
    margin-top: 15px;
  padding: 10px 20px;
  background: #00d0ff;
  border: none;
  color: rgb(0, 0, 0);
  font-size: 14px;
  border-radius: 5px;
  transition: 0.3s;
}
#backButton {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #00d0ff;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
       
    </style>
</head>
<body>
    
    
    <canvas id="starCanvas"></canvas>
    <a href="index.html">
        <button id="backButton">Back</button>
      </a>

    <h2 class="glow">HyperVerseðŸ›¸</h2>
    <div id="gameContainer">
        <div id="player"></div>
    </div>
    <p>Score: <span id="score">0</span></p>
    <p>User Score: <span id="userScore">0</span></p>
    <div id="gameOverPopup">
        <h3>Game Over</h3>
        <button class="restart" onclick="restartGame()">Restart</button>
    </div>
    <script>
      let player = document.getElementById("player");
let container = document.getElementById("gameContainer");
let scoreDisplay = document.getElementById("score");
let userScoreDisplay = document.getElementById("userScore");
let gameOverPopup = document.getElementById("gameOverPopup");
let playerPos = container.clientWidth / 2 - 25;
let score = 0;
let userScore = localStorage.getItem("userScore") || 0;
let gameOverFlag = false; // New variable to track if the game is over
userScoreDisplay.textContent = userScore;

let touchStartX = 0;
let velocity = 0; // New variable for velocity (smoothness)
let friction = 0.1; // Adjust this value for more/less smoothness
let maxSpeed = 5; // Maximum speed of the player

container.addEventListener("touchstart", (e) => {
    touchStartX = e.touches[0].clientX;
});

container.addEventListener("touchmove", (e) => {
    if (gameOverFlag) return; // Stop player movement if the game is over

    let touchX = e.touches[0].clientX;
    let deltaX = touchX - touchStartX;

    // Update velocity based on the touch movement
    velocity += deltaX * 0.5;
    velocity = Math.max(-maxSpeed, Math.min(maxSpeed, velocity)); // Limit the speed

    touchStartX = touchX;
});

// Update the player's position smoothly
function updatePlayerPosition() {
    if (gameOverFlag) return;

    playerPos += velocity; // Move the player by the current velocity

    // Apply friction to gradually reduce speed
    velocity *= (1 - friction);

    // Ensure the player stays within the container bounds
    playerPos = Math.max(0, Math.min(container.clientWidth - 50, playerPos));

    player.style.left = playerPos + "px";
}

function createFallingObject() {
    if (gameOverFlag) return; // Stop creating falling objects if the game is over

    let obj = document.createElement("div");
    obj.classList.add("fallingObject");
    obj.style.left = Math.random() * (container.clientWidth - 30) + "px";
    container.appendChild(obj);
    obj.style.animationDuration = Math.random() * 2 + 2 + "s";

    let fallInterval = setInterval(() => {
        let objRect = obj.getBoundingClientRect();
        let playerRect = player.getBoundingClientRect();

        if (objRect.bottom >= playerRect.top && objRect.left > playerRect.left - 30 && objRect.right < playerRect.right + 30) {
            score++;
            userScore++;  // Increase both score and userScore
            scoreDisplay.textContent = score;
            userScoreDisplay.textContent = userScore;
            localStorage.setItem("userScore", userScore);  // Store updated userScore
            obj.remove();
            clearInterval(fallInterval);
        }
        if (objRect.top > container.clientHeight) {
            gameOver();
            obj.remove();
            clearInterval(fallInterval);
        }
    }, 10);
}

function gameOver() {
    gameOverFlag = true; // Set game over flag to true
    gameOverPopup.style.display = "block"; // Display the game over popup
    container.style.display = "none"; // Hide the game container
    scoreDisplay.style.display = "none"; // Hide the score display
    userScoreDisplay.style.display = "none"; // Hide the user score display
}

function restartGame() {
    location.reload();
}

setInterval(createFallingObject, 1000);
setInterval(updatePlayerPosition, 10); // Update the player's position smoothly every 10ms

const canvas = document.getElementById("starCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const stars = [];
const numStars = 333;

for (let i = 0; i < numStars; i++) {
    stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 2,
        speed: Math.random() * 0.4 + 0.2,
    });
}

function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "black";

    stars.forEach((star) => {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fill();

        star.y += star.speed;
        if (star.y > canvas.height) {
            star.y = 0;
            star.x = Math.random() * canvas.width;
        }
    });

    requestAnimationFrame(drawStars);
}

drawStars();

window.addEventListener("resize", () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
let touchEndX = 0;
let touchThreshold = 30; // Õ”Õ¡Õ¶Õ« ÕºÕ«Ö„Õ½Õ¥Õ¬ ÕºÕ¥Õ¿Ö„ Õ§ Õ·Õ¡Ö€ÕªÕ¾Õ«, Õ¸Ö€ Õ·Õ¡Ö€ÕªÕ¸Ö‚Õ´Õ¨ Õ°Õ¡Õ·Õ¾Õ¾Õ« Õ¸Ö€ÕºÕ¥Õ½ swipe

document.addEventListener("touchstart", (e) => {
    touchStartX = e.touches[0].clientX;
});

document.addEventListener("touchmove", (e) => {
    touchEndX = e.touches[0].clientX;
});

document.addEventListener("touchend", () => {
    let diffX = touchEndX - touchStartX;

    if (Math.abs(diffX) > touchThreshold) {
        if (diffX > 0) {
            // Õ‡Õ¡Ö€ÕªÕ¾Õ¸Ö‚Õ´ Õ§ Õ¡Õ»
            velocity = 5;
        } else {
            // Õ‡Õ¡Ö€ÕªÕ¾Õ¸Ö‚Õ´ Õ§ Õ±Õ¡Õ­
            velocity = -5;
        }
    }
});
container.addEventListener("touchstart", (e) => {
    touchStartX = e.touches[0].clientX;
    playerStartX = player.offsetLeft; // ÕŠÕ¡Õ°Õ¸Ö‚Õ´ Õ¥Õ¶Ö„ Õ­Õ¡Õ²Õ¡ÖÕ¸Õ²Õ« Õ½Õ¯Õ¦Õ¢Õ¶Õ¡Õ¯Õ¡Õ¶ Õ¤Õ«Ö€Ö„Õ¨
});

container.addEventListener("touchmove", (e) => {
    let touchX = e.touches[0].clientX;
    let deltaX = touchX - touchStartX; // Õ€Õ¡Õ·Õ¾Õ¸Ö‚Õ´ Õ¥Õ¶Ö„ ÖƒÕ¸ÖƒÕ¸Õ­Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶Õ¨
    
    let newPlayerPos = playerStartX + deltaX; // Õ†Õ¸Ö€ Õ¤Õ«Ö€Ö„Õ¨

    // ÕŽÕ¥Ö€Õ¡Õ°Õ½Õ¯Õ¸Ö‚Õ´ Õ¥Õ¶Ö„, Õ¸Ö€ Õ­Õ¡Õ²Õ¡ÖÕ¸Õ²Õ¨ Õ¹Õ¡Õ¶ÖÕ¶Õ« Õ½Õ¡Õ°Õ´Õ¡Õ¶Õ¶Õ¥Ö€Õ«Ö
    newPlayerPos = Math.max(0, Math.min(container.clientWidth - player.clientWidth, newPlayerPos));

    player.style.left = newPlayerPos + "px";
});
document.addEventListener("touchend", () => {
    let diffX = touchEndX - touchStartX;

    if (Math.abs(diffX) > touchThreshold) {
        velocity = diffX > 0 ? 5 : -5;
        setTimeout(() => {
            velocity = 0;
        }, 200); // 200ms Õ°Õ¥Õ¿Õ¸ Õ¯Õ¡Õ¶Õ£Õ¶Õ¸Ö‚Õ´ Õ§
    }
});


    </script>
</body>
</html>
